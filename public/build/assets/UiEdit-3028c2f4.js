import{_ as f}from"./AuthenticatedLayout-5d316374.js";import{l as v,p as a,o as d,f as l,a as i,w as p,F as c,Z as w,j as E,b as o,q as y}from"./app-141596ac.js";import b from"./PromptForm-d55fdeee.js";import P from"./ChatMessage-b7a13b9f.js";import x from"./ChatList-116f8cc4.js";import{E as C}from"./Editor-db7a3472.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const I=v({props:{user:Object,ui:Object},components:{AuthenticatedLayout:f,Head:w,Link:E,PromptForm:b,ChatMessage:P,ChatList:x,Editor:C},data(){return{messages:[],placeholder:"",components:[],prompt:"",promptImages:[],isUserScrollBottom:!0,sendPrompt:[]}},mounted(){window.ui=this},methods:{changeImages(t){this.images=t},examplePrompt(t){this.prompt=t.prompt},send:async function(){let t=this.getPrompt;console.log(t,"PROMPT"),this.sendPrompt=t;try{const e=await axios.post(route("ui.send",{}),{prompt:t,id:this.ui.id});this.ui.html=e.data.html,this.ui.id=e.data.id;const s=new EventSource(route("ui.stream",{uiId:this.ui.id}),{withCredentials:!0});s.addEventListener("message",r=>{const m=JSON.parse(r.data);m.delta.content&&(this.ui.html=(this.ui.html??"")+m.delta.content)}),s.addEventListener("stop",r=>{s.close()}),s.addEventListener("error",r=>{console.error("EventSource failed:",r),s.close()})}catch(e){console.error("Error with POST request:",e)}}},computed:{getPrompt(){return[{type:"text",text:this.prompt??""},...this.promptImages]}}}),S=o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Ui",-1),k={class:"flex flex-col h-full"},U=o("img",{class:"absolute z-10 inset-0 object-cover pointer-events-none",src:"/img/bg.svg"},null,-1),j={class:"@container z-20 items-center justify-center grow flex flex-col"},F={class:"z-20 my-10 w-full"},O={class:"z-10"},V={class:"grid grid-cols-3"};function $(t,e,s,r,m,z){const u=a("Head"),h=a("PromptForm"),g=a("Editor"),_=a("AuthenticatedLayout");return d(),l(c,null,[i(u,{title:"Chat"}),i(_,{class:"bg-gray-50 dark:bg-black"},{header:p(()=>[S]),default:p(()=>[o("div",k,[U,o("div",j,[o("div",F,[i(h,{class:"w-full",onSend:t.send,onChangeImages:t.changeImages,images:t.promptImages,prompt:t.prompt,"onUpdate:prompt":e[0]||(e[0]=n=>t.prompt=n),rows:"2",placeholder:"tweaks"},null,8,["onSend","onChangeImages","images","prompt"])])]),o("div",O,[i(g,{class:"border-2 mx-5 lg:mx-20",modelValue:t.ui.html,"onUpdate:modelValue":e[1]||(e[1]=n=>t.ui.html=n)},null,8,["modelValue"])])]),o("div",V,[(d(!0),l(c,null,y(t.components,n=>(d(),l("div"))),256))])]),_:1})],64)}const J=L(I,[["render",$]]);export{J as default};
