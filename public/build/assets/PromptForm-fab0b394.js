import{l as d,o as l,f as i,b as r,F as p,q as h,g as m,e as g}from"./app-bec4542d.js";import{_ as u}from"./_plugin-vue_export-helper-c27b6911.js";const f=d({emits:["send","update:prompt"],props:{prompt:String,rows:{type:String,default:1},placeholder:{type:String,default:"Message ChatGPTâ€¦"},images:{type:Array,default:[]}},mounted(){this.$refs.prompt.focus()},watch:{placeholder(){this.autoExpand()},prompt(){this.autoExpand()}},methods:{getPrompt(e){return prompt=this.prompt,prompt[0]={type:"text",text:e},prompt},triggerFileInput(){this.$refs.fileInput.click()},handleFileChange(e){const t=e.target.files;console.log(t),t[0];for(const s of t)this.addFileToUpload(s)},addFileToUpload(e){if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=s=>{this.images.push({type:"image_url",image_url:{url:s.target.result}})},t.readAsDataURL(e)}},removeImage(e){this.images.splice(e,1)},image(){let e=["https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg","https://newicon.net/firefly/file/get?id=sGmFa7BbddCfNfaizkapBg","https://newicon.net/firefly/file/get?id=H5enoiNCdEG6bQb4WpRdtg","https://newicon.net/firefly/file/get?id=kX5VGefDe__afQ18FJxXF0"],t=e[Math.floor(Math.random()*e.length)];this.convertImageToBase64(t,s=>{this.images.push({type:"image_url",image_url:{url:s}})})},convertImageToBase64(e,t){fetch(e).then(s=>s.blob()).then(s=>{const a=new FileReader;a.onloadend=()=>{t(a.result)},a.readAsDataURL(s)}).catch(s=>console.error("Error converting image to Base64:",s))},send(){this.images.length?this.$emit("send",{prompt:[{type:"text",text:this.prompt},...this.images]}):this.$emit("send",{prompt:this.prompt}),setTimeout(()=>{this.autoExpand()},10)},autoExpand(){this.$refs.prompt.style.height="auto";let e=this.$refs.prompt.scrollHeight+"px";this.$refs.prompt.style.height=e},handleKeyPress(e){(e.ctrlKey||e.metaKey)&&e.key==="Enter"&&this.send()},onBlur(){/^\s*$/.test(this.prompt)&&(this.$refs.prompt.style.height="auto")}}}),b={class:"relative flex h-full flex-1 items-stretch md:flex-col"},c={class:"flex w-full items-center"},w={class:"overflow-hidden [&:has(textarea:focus)]:border-token-border-xheavy [&:has(textarea:focus)]:shadow-[0_2px_6px_rgba(0,0,0,.05)] flex flex-row w-full dark:border-token-border-heavy flex-grow relative border border-token-border-heavy dark:text-white rounded-2xl bg-white dark:bg-gray-800 shadow-[0_0_0_2px_rgba(255,255,255,0.95)] dark:shadow-[0_0_0_2px_rgba(52,53,65,0.95)]"},x={class:"relative flex"},k=r("div",{class:"flex w-full gap-2 items-center justify-center"},[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 7C9 4.23858 11.2386 2 14 2C16.7614 2 19 4.23858 19 7V15C19 18.866 15.866 22 12 22C8.13401 22 5 18.866 5 15V9C5 8.44772 5.44772 8 6 8C6.55228 8 7 8.44772 7 9V15C7 17.7614 9.23858 20 12 20C14.7614 20 17 17.7614 17 15V7C17 5.34315 15.6569 4 14 4C12.3431 4 11 5.34315 11 7V15C11 15.5523 11.4477 16 12 16C12.5523 16 13 15.5523 13 15V9C13 8.44772 13.4477 8 14 8C14.5523 8 15 8.44772 15 9V15C15 16.6569 13.6569 18 12 18C10.3431 18 9 16.6569 9 15V7Z",fill:"currentColor"})])],-1),v=[k],y={class:"w-full items-center flex-col"},C={key:0,class:"flex gap-2"},_={class:"relative w-20 group"},F=["src"],$=["onClick"],B={class:"flex items-center"},V=["value","rows","placeholder"],E=r("span",{class:"","data-state":"closed"},[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",class:"text-white dark:text-black"},[r("path",{d:"M7 11L12 6L17 11M12 18V7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),I=[E];function K(e,t,s,a,M,G){return l(),i("form",{onSubmit:t[7]||(t[7]=g(()=>{},["prevent"])),class:"stretch mx-2 flex flex-row gap-3 last:mb-2 md:mx-4 md:last:mb-6 lg:mx-auto lg:max-w-2xl xl:max-w-3xl"},[r("div",b,[r("div",c,[r("div",w,[r("div",x,[r("button",{onClick:t[0]||(t[0]=(...o)=>e.triggerFileInput&&e.triggerFileInput(...o)),class:"self-end mb-3 pl-3 btn p-0 text-black dark:text-white","aria-label":"Attach files"},v),r("input",{ref:"fileInput",onChange:t[1]||(t[1]=(...o)=>e.handleFileChange&&e.handleFileChange(...o)),multiple:"",type:"file",tabindex:"-1",class:"hidden",style:{display:"none"}},null,544)]),r("div",y,[e.images.length?(l(),i("div",C,[(l(!0),i(p,null,h(e.images,(o,n)=>(l(),i("div",_,[r("img",{class:"w-full m-2 rounded-md",src:o.image_url.url},null,8,F),r("button",{onClick:P=>e.removeImage(n),class:"z-10 absolute -top-1 -right-3 hidden group-hover:block bg-white/60 hover:bg-white rounded-full px-2"},"x",8,$)]))),256))])):m("",!0),r("div",B,[r("textarea",{onKeyup:t[2]||(t[2]=(...o)=>e.autoExpand&&e.autoExpand(...o)),onKeydown:t[3]||(t[3]=(...o)=>e.handleKeyPress&&e.handleKeyPress(...o)),onBlur:t[4]||(t[4]=(...o)=>e.onBlur&&e.onBlur(...o)),value:e.prompt,onInput:t[5]||(t[5]=o=>e.$emit("update:prompt",o.target.value)),ref:"prompt",id:"prompt-textarea",tabindex:"0",rows:e.rows,placeholder:e.placeholder,class:"m-0 w-full resize-none border-0 bg-transparent py-3 pr-10 focus:ring-0 focus-visible:ring-0 dark:bg-transparent md:pr-12 placeholder-black/50 dark:placeholder-white/50 pl-4",style:{"max-height":"250px",height:"52px"}},null,40,V)])]),r("button",{onClick:t[6]||(t[6]=(...o)=>e.send&&e.send(...o)),class:"absolute bg-black hover:bg-gray-600 dark:bg-white md:bottom-3 md:right-3 dark:hover:bg-gray-900 dark:disabled:hover:bg-transparent right-2 dark:disabled:bg-white disabled:opacity-10 disabled:text-gray-400 text-white p-0.5 border border-black rounded-lg dark:border-white bottom-1.5 transition-colors","data-testid":"send-button"},I)])])])],32)}const R=u(f,[["render",K]]);export{R as default};
